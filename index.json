[{"content":"Opencode tutorial for beginners 1. 介绍 Opencode [1] 定位是Claude Code 的开源替代品。\n但在目前LLM发展的趋势下，Claude Code很难独占市场，同时我并不看好A\\实施的技术封锁。世面上Coding Agent普遍装配有现在最火的Skills、MCP servers、Agents、Subagents，单一使用Claude Code、Codex、Gemini CLI面临的问题就是锁定该CLI采用的模型。虽然现在[2-3]能够实现在CLI级别下，通过Skills方式在三家CLI之间进行联动，但流程繁琐、上下文管理不够精细、不适用于科研，同时[4]这类切换中转站管理的方式也能解决短期额度不够的问题。\n上述讨论的问题，并不在该教程中深入讨论，Opencode通过后续安装插件能更好解决上述调用多个模型的痛点问题。\n开源软件注定拥有更高的可玩性，但是配置门槛相应会高一些。\n1.1 部署 [1]中仓库给出了opencode的多个平台的Desktop和tui的安装方式，根据喜好进行安装。\n推荐安装：\nOh-my-opencode[5] Opencode-antigravity-auth[6] 后续会给出推荐理由\n1.2 优势 在介绍中，大概提了两点目前御三家的痛点问题，这在Opencode中正好是完美符合，同时对学生党更加友好，相应的至少有两个优势：\n能够灵活使用多个且多家模型； 对使用API调用模型的用户更友好，配置文件写好即可使用slack command进行模型切换。 上下文窗口有百分比显示，容易对单个对话进行控制。 (补充) 如今已经支持github copilot登陆，通过Opencode-antigravity-auth可使用Google one pro用户在antigravity的额度，不需要通过反代。 2. 配置 开源社区中有丰富的docs，[7]中有详细的配置流程可供参考，官方并未支持中文，差评！A\\的docs都支持中文。[8]中有非官方的中文docs，谨慎阅读，容易夹带私货。\n接下来，直接进入穷学生省流配置环节\n2.1 github copilot 在安装好Opencode后，建议不要直接在终端直接运行，而是先运行下面命令。\nopencode auth login 选择对应的model provider进行OAuth登陆，这里穷学生直接选择github copilot的学生包，添加好认证后，就已经可以使用opencode随意探索了。\n注意\n这里面有一个对于我这种强迫症患者必须要做的，不用听有些教程上说的，在auth login选择other手动添加自己的中转站。 对于添加了自己不用的provider，使用opencode autho logout进行相应删除，不然翻遍配置文件，都不知道自己添加的provider到底放在哪个位置。 (重点)：如果发现登陆过后模型不可用，请打开github，在头像中点击settings-\u0026gt;copilot-\u0026gt;Fetures将需要用的模型打开，同时可以查看当前premium requests查看用量。 2.2 Google one pro 相信很多穷学生都是美国留学生，拥有了Google one pro订阅的账号，虽然额度一调再调，但是对于科研党是完全够用的，不讨论如何获取Google one pro(养美区号，1key认证，咸鱼一刀虚拟卡)。\n在[6]中安装Opencode-antigravity-auth插件，该插件可以将Google one pro订阅用到极致。\n2.2.1 多账户设置 使用上述登陆命令，可以添加实现多账户登陆，一个家庭组就是六个人。\n2 account(s) saved: 1. user1@gmail.com 2. user2@gmail.com (a)dd new account(s) or (f)resh start? [a/f]: 注意： 这个插件下使用Gemini模型可以先使用antigravity的额度，限额后可以自动切换到Gemini CLI的额度。\n配置文件存储在~/.config/opencode/antigravity-accounts.json，以明文形式储存账户凭证，涉及敏感信息。\n2.2.2 模型配置 目前在antigravity中支持的模型\n模型名称 (Model) 变体 (Variants) 说明 (Notes) antigravity-gemini-3-pro low, high Gemini 3 Pro (支持思维链/thinking) antigravity-gemini-3-flash minimal, low, medium, high Gemini 3 Flash (支持思维链/thinking) antigravity-claude-sonnet-4-5 — Claude Sonnet 4.5 antigravity-claude-sonnet-4-5-thinking low, max Claude Sonnet (支持长文本思维链) antigravity-claude-opus-4-5-thinking low, max Claude Opus (支持长文本思维链) 下面提供一个配置文件可以叫AI帮忙写入。\n{ \u0026#34;google\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Google\u0026#34;, \u0026#34;models\u0026#34;: { \u0026#34;antigravity-gemini-3-pro-high\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Gemini 3 Pro High (Antigravity)\u0026#34;, \u0026#34;thinking\u0026#34;: true, \u0026#34;attachment\u0026#34;: true, \u0026#34;limit\u0026#34;: { \u0026#34;context\u0026#34;: 1048576, \u0026#34;output\u0026#34;: 65535 }, \u0026#34;modalities\u0026#34;: { \u0026#34;input\u0026#34;: [\u0026#34;text\u0026#34;, \u0026#34;image\u0026#34;, \u0026#34;pdf\u0026#34;], \u0026#34;output\u0026#34;: [\u0026#34;text\u0026#34;] } }, \u0026#34;antigravity-gemini-3-pro-low\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Gemini 3 Pro Low (Antigravity)\u0026#34;, \u0026#34;thinking\u0026#34;: true, \u0026#34;attachment\u0026#34;: true, \u0026#34;limit\u0026#34;: { \u0026#34;context\u0026#34;: 1048576, \u0026#34;output\u0026#34;: 65535 }, \u0026#34;modalities\u0026#34;: { \u0026#34;input\u0026#34;: [\u0026#34;text\u0026#34;, \u0026#34;image\u0026#34;, \u0026#34;pdf\u0026#34;], \u0026#34;output\u0026#34;: [\u0026#34;text\u0026#34;] } }, \u0026#34;antigravity-gemini-3-flash\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Gemini 3 Flash (Antigravity)\u0026#34;, \u0026#34;attachment\u0026#34;: true, \u0026#34;limit\u0026#34;: { \u0026#34;context\u0026#34;: 1048576, \u0026#34;output\u0026#34;: 65536 }, \u0026#34;modalities\u0026#34;: { \u0026#34;input\u0026#34;: [\u0026#34;text\u0026#34;, \u0026#34;image\u0026#34;, \u0026#34;pdf\u0026#34;], \u0026#34;output\u0026#34;: [\u0026#34;text\u0026#34;] } }, \u0026#34;antigravity-claude-sonnet-4-5-thinking\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Claude Sonnet 4.5 Thinking\u0026#34;, \u0026#34;limit\u0026#34;: { \u0026#34;context\u0026#34;: 200000, \u0026#34;output\u0026#34;: 64000 }, \u0026#34;modalities\u0026#34;: { \u0026#34;input\u0026#34;: [\u0026#34;text\u0026#34;, \u0026#34;image\u0026#34;, \u0026#34;pdf\u0026#34;], \u0026#34;output\u0026#34;: [\u0026#34;text\u0026#34;] }, \u0026#34;variants\u0026#34;: { \u0026#34;low\u0026#34;: { \u0026#34;thinkingConfig\u0026#34;: { \u0026#34;thinkingBudget\u0026#34;: 8192 } }, \u0026#34;max\u0026#34;: { \u0026#34;thinkingConfig\u0026#34;: { \u0026#34;thinkingBudget\u0026#34;: 32768 } } } }, \u0026#34;antigravity-claude-opus-4-5-thinking\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Claude Opus 4.5 Thinking\u0026#34;, \u0026#34;limit\u0026#34;: { \u0026#34;context\u0026#34;: 200000, \u0026#34;output\u0026#34;: 64000 }, \u0026#34;modalities\u0026#34;: { \u0026#34;input\u0026#34;: [\u0026#34;text\u0026#34;, \u0026#34;image\u0026#34;, \u0026#34;pdf\u0026#34;], \u0026#34;output\u0026#34;: [\u0026#34;text\u0026#34;] }, \u0026#34;variants\u0026#34;: { \u0026#34;low\u0026#34;: { \u0026#34;thinkingConfig\u0026#34;: { \u0026#34;thinkingBudget\u0026#34;: 8192 } }, \u0026#34;max\u0026#34;: { \u0026#34;thinkingConfig\u0026#34;: { \u0026#34;thinkingBudget\u0026#34;: 32768 } } } }, \u0026#34;antigravity-claude-sonnet-4-5\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Claude Sonnet 4.5\u0026#34;, \u0026#34;limit\u0026#34;: { \u0026#34;context\u0026#34;: 200000, \u0026#34;output\u0026#34;: 64000 }, \u0026#34;modalities\u0026#34;: { \u0026#34;input\u0026#34;: [\u0026#34;text\u0026#34;, \u0026#34;image\u0026#34;, \u0026#34;pdf\u0026#34;], \u0026#34;output\u0026#34;: [\u0026#34;text\u0026#34;] } } } } } 而这个配置文件是放在~/.config/opencode/opencode.json文件中，如果出现安装了opencode但是没有找到这个文件，那么让AI建一个。\n官方docs中给出了模版\n{ \u0026#34;$schema\u0026#34;: \u0026#34;https://opencode.ai/config.json\u0026#34;, // Theme configuration \u0026#34;theme\u0026#34;: \u0026#34;opencode\u0026#34;, \u0026#34;model\u0026#34;: \u0026#34;anthropic/claude-sonnet-4-5\u0026#34;, \u0026#34;autoupdate\u0026#34;: true, } 2.3 中转站API 上述github copilot和Google one pro就已经覆盖当前市面上最强的三家模型，同时opencode中还提供Minimax 2.1和GLM-4.7的国产免费模型，如果这都还不够，那么就添加中转站API来满足用量。\n还是在~/.config/opencode/opencode.json中直接写入下面模版内容，手动添加baseURL和apiKey，同时核对中转站模型名称。\n{ \u0026#34;provider\u0026#34;: { \u0026#34;custom-anthropic-provider\u0026#34;: { \u0026#34;options\u0026#34;: { \u0026#34;baseURL\u0026#34;: \u0026#34;https://\u0026lt;YOUR_API_PROXY_ENDPOINT\u0026gt;/v1\u0026#34;, \u0026#34;apiKey\u0026#34;: \u0026#34;sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u0026#34; }, \u0026#34;models\u0026#34;: { \u0026#34;claude-opus-4-5-20251101\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Claude Opus 4.5\u0026#34; }, \u0026#34;claude-sonnet-4-5-20250929\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Claude Sonnet 4.5\u0026#34; }, \u0026#34;claude-haiku-4-5-20251001\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Claude Haiku 4.5\u0026#34; } } }, \u0026#34;custom-openai-provider\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;Provider Name\u0026#34;, \u0026#34;options\u0026#34;: { \u0026#34;baseURL\u0026#34;: \u0026#34;https://\u0026lt;YOUR_API_PROXY_ENDPOINT\u0026gt;/v1\u0026#34;, \u0026#34;apiKey\u0026#34;: \u0026#34;sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\u0026#34; }, \u0026#34;models\u0026#34;: { \u0026#34;gpt-5.2-codex\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;GPT 5.2 Codex\u0026#34;, \u0026#34;options\u0026#34;: { \u0026#34;reasoningEffort\u0026#34;: \u0026#34;high\u0026#34;, \u0026#34;store\u0026#34;: false }, \u0026#34;variants\u0026#34;: { \u0026#34;low\u0026#34;: { \u0026#34;options\u0026#34;: { \u0026#34;reasoningEffort\u0026#34;: \u0026#34;low\u0026#34; } }, \u0026#34;medium\u0026#34;: { \u0026#34;options\u0026#34;: { \u0026#34;reasoningEffort\u0026#34;: \u0026#34;medium\u0026#34; } }, \u0026#34;high\u0026#34;: { \u0026#34;options\u0026#34;: { \u0026#34;reasoningEffort\u0026#34;: \u0026#34;high\u0026#34; } } } } } } } } 注意：\n该配置文件就体现出它的优点了，可以写入多个provider的模型，而后面只需要/models就能轻松切换 这种方式是采用明文形式存储，在官方文档中给出另外两种更安全的方式。 { \u0026#34;$schema\u0026#34;: \u0026#34;https://opencode.ai/config.json\u0026#34;, \u0026#34;model\u0026#34;: \u0026#34;{env:OPENCODE_MODEL}\u0026#34;, # [\u0026#34;./custom-instructions.md\u0026#34;], \u0026#34;provider\u0026#34;: { \u0026#34;anthropic\u0026#34;: { \u0026#34;models\u0026#34;: {}, \u0026#34;options\u0026#34;: { \u0026#34;apiKey\u0026#34;: \u0026#34;{env:ANTHROPIC_API_KEY}\u0026#34; # [\u0026#34;./custom-instructions.md\u0026#34;], } } } } 3. 插件 opencode中可以安装各种plugins，可根据自己的需求进行安装，目前推荐的就是下面两个必装插件。\n3.1 opencode-antigravity-auth 在2.2中已经详细介绍了，这里仅为了保持行文的结构性。\n3.2 oh-my-opencode 3.2.1 安装 [5]中给了该插件的仓库，懒人方法是直接进入opencode，告诉它，在在全局或者在当前项目下安装，即可。可以预见的未来，github仓库就不再是放源码，而是放一堆markdown文件，AI已经具备复现项目的能力。\n3.2.2 配置 同样全局安装该插件后会生成~/.config/opencode/oh-my-opencode.json的配置文件\n下面直接给配置模板\n{ \u0026#34;$schema\u0026#34;: \u0026#34;https://raw.githubusercontent.com/code-yeongyu/oh-my-opencode/master/assets/oh-my-opencode.schema.json\u0026#34;, \u0026#34;google_auth\u0026#34;: false, \u0026#34;agents\u0026#34;: { \u0026#34;Sisyphus\u0026#34;: { \u0026#34;model\u0026#34;: \u0026#34;antigravity-claude-opus-4-5-thinking\u0026#34; }, \u0026#34;oracle\u0026#34;: { \u0026#34;model\u0026#34;: \u0026#34;antigravity-claude-sonnet-4.5-thinking\u0026#34; }, \u0026#34;librarian\u0026#34;: { \u0026#34;model\u0026#34;: \u0026#34;your_provider/claude-sonnet-4-5-20250929\u0026#34; }, \u0026#34;explore\u0026#34;: { \u0026#34;model\u0026#34;: \u0026#34;google/antigravity-gemini-3-flash\u0026#34; }, \u0026#34;frontend-ui-ux-engineer\u0026#34;: { \u0026#34;model\u0026#34;: \u0026#34;google/antigravity-gemini-3-pro-high\u0026#34; }, \u0026#34;document-writer\u0026#34;: { \u0026#34;model\u0026#34;: \u0026#34;google/antigravity-gemini-3-flash\u0026#34; }, \u0026#34;multimodal-looker\u0026#34;: { \u0026#34;model\u0026#34;: \u0026#34;google/antigravity-gemini-3-pro-high\u0026#34; } } } 注意：\n这里的model设置要与opencode.json文件对应，该问题可以直接通过AI进行校对。 每个模型对应的权限可以单独设置，这里采用项目的默认设置. (重点)安装这个插件会默认关闭opencode自带的两个Agents，Plan and Build，可以在[7]中重新开启。 后面的内容不是这次教程的重点，oh-my-opencode是一个非常强大的插件，内置了很多Agents，skills，MCP servers，Hooks。\n4. 提示词 Opencode 支持三种作用域的规则\n作用域 文件位置 适用场景 全局规则 ~/.config/opencode/AGENTS.md 所有项目通用的个人偏好（ 项目规则 项目根目录 AGENTS.md 特定项目专用的规范 配置文件 opencode.json 的 instructions 字段 用于引用多个规则文件，或者配置更复杂的指令集。 注意：同时兼容Claude Code的CLAUDE.md\n5. 进阶 下次出一个进阶版教程。\n参考文献 https://github.com/anomalyco/opencode https://github.com/GuDaStudio/skills https://github.com/fengshao1227/ccg-workflow https://github.com/farion1231/cc-switch https://github.com/code-yeongyu/oh-my-opencode https://github.com/NoeFabris/opencode-antigravity-auth https://opencode.ai/docs https://www.opencodecn.com/ ","permalink":"https://phy-zhangzl.github.io/posts/opencode_tutorial/","summary":"\u003ch1 id=\"opencode-tutorial-for-beginners\"\u003eOpencode tutorial for beginners\u003c/h1\u003e\n\u003ch2 id=\"1-介绍\"\u003e1. 介绍\u003c/h2\u003e\n\u003cp\u003eOpencode [1] 定位是Claude Code 的开源替代品。\u003c/p\u003e\n\u003cp\u003e但在目前LLM发展的趋势下，Claude Code很难独占市场，同时我并不看好A\\实施的技术封锁。世面上Coding Agent普遍装配有现在最火的Skills、MCP servers、Agents、Subagents，单一使用Claude Code、Codex、Gemini CLI面临的问题就是锁定该CLI采用的模型。虽然现在[2-3]能够实现在CLI级别下，通过Skills方式在三家CLI之间进行联动，但流程繁琐、上下文管理不够精细、不适用于科研，同时[4]这类切换中转站管理的方式也能解决短期额度不够的问题。\u003c/p\u003e\n\u003cp\u003e上述讨论的问题，并不在该教程中深入讨论，Opencode通过后续安装插件能更好解决上述调用多个模型的痛点问题。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e开源软件注定拥有更高的可玩性，但是配置门槛相应会高一些。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch3 id=\"11-部署\"\u003e1.1 部署\u003c/h3\u003e\n\u003cp\u003e[1]中仓库给出了opencode的多个平台的Desktop和tui的安装方式，根据喜好进行安装。\u003c/p\u003e\n\u003cp\u003e推荐安装：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOh-my-opencode[5]\u003c/li\u003e\n\u003cli\u003eOpencode-antigravity-auth[6]\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e后续会给出推荐理由\u003c/p\u003e\n\u003ch3 id=\"12-优势\"\u003e1.2 优势\u003c/h3\u003e\n\u003cp\u003e在介绍中，大概提了两点目前御三家的痛点问题，这在Opencode中正好是完美符合，同时对学生党更加友好，相应的至少有两个优势：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e能够灵活使用多个且多家模型；\u003c/li\u003e\n\u003cli\u003e对使用API调用模型的用户更友好，配置文件写好即可使用slack command进行模型切换。\u003c/li\u003e\n\u003cli\u003e上下文窗口有百分比显示，容易对单个对话进行控制。\u003c/li\u003e\n\u003cli\u003e(补充) 如今已经支持github copilot登陆，通过Opencode-antigravity-auth可使用Google one pro用户在antigravity的额度，不需要通过反代。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"2-配置\"\u003e2. 配置\u003c/h2\u003e\n\u003cp\u003e开源社区中有丰富的docs，[7]中有详细的配置流程可供参考，官方并未支持中文，差评！A\\的docs都支持中文。[8]中有非官方的中文docs，谨慎阅读，容易夹带私货。\u003c/p\u003e\n\u003cp\u003e接下来，直接进入穷学生省流配置环节\u003c/p\u003e\n\u003ch3 id=\"21-github-copilot\"\u003e2.1 github copilot\u003c/h3\u003e\n\u003cp\u003e在安装好Opencode后，建议不要直接在终端直接运行，而是先运行下面命令。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eopencode auth login\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003e选择对应的model provider进行OAuth登陆，这里穷学生直接选择github copilot的学生包，添加好认证后，就已经可以使用opencode随意探索了。\u003c/p\u003e\n\u003cp\u003e\u003cem\u003e注意\u003c/em\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e这里面有一个对于我这种强迫症患者必须要做的，不用听有些教程上说的，在\u003ccode\u003eauth login\u003c/code\u003e选择\u003ccode\u003eother\u003c/code\u003e手动添加自己的中转站。\u003c/li\u003e\n\u003cli\u003e对于添加了自己不用的provider，使用\u003ccode\u003eopencode autho logout\u003c/code\u003e进行相应删除，不然翻遍配置文件，都不知道自己添加的provider到底放在哪个位置。\u003c/li\u003e\n\u003cli\u003e(重点)：如果发现登陆过后模型不可用，请打开github，在头像中点击\u003ccode\u003esettings-\u0026gt;copilot-\u0026gt;Fetures\u003c/code\u003e将需要用的模型打开，同时可以查看当前premium requests查看用量。\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"22-google-one-pro\"\u003e2.2 Google one pro\u003c/h3\u003e\n\u003cp\u003e相信很多穷学生都是美国留学生，拥有了Google one pro订阅的账号，虽然额度一调再调，但是对于科研党是完全够用的，不讨论如何获取Google one pro(养美区号，1key认证，咸鱼一刀虚拟卡)。\u003c/p\u003e\n\u003cp\u003e在[6]中安装Opencode-antigravity-auth插件，该插件可以将Google one pro订阅用到极致。\u003c/p\u003e","title":"Opencode tutorial for beginners"}]